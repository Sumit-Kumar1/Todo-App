{{define "index"}}
<!DOCTYPE html>
<html>

<head>
	<title>Todo APP HTMX</title>
	<script src="https://unpkg.com/htmx.org@1.9.11/dist/htmx.js"
		integrity="sha384-l9bYT9SL4CAW0Hl7pAOpfRc18mys1b0wK4U8UtGnWOxPVbVMgrOdB+jyz/WY8Jue"
		crossorigin="anonymous"></script>
	<script src="https://cdn.tailwindcss.com"></script>
</head>

<body>
	<h1 class="text-2xl text-center">TODO APP</h1>
	<div class="flex min-w-full gap-3 divide-y divide-gray-200 min-h-[95vh]">
		<div class="border-2 w-1/3">
			<form hx-post="/add" hx-target="#rend" class="w-full text-center">
				<input placeholder="Task Title*" name="task" type="text"
					class="border rounded p-2 sm:w-full sm:w-1/2 md:w-auto"></input>
				<input placeholder="Task Description" name="desc" type="text"
					class="border rounded p-2 md:w-1/2 sm:w-full"></input>
				<button type="submit" hx-on:after-request="alert('Task Added!!');" hx-on:
					class="border rounded p-2 border-gray-700 bg-blue-500 text-white hover:bg-blue-700">Add Task</button>
			</form>
	
		</div>
		
		<table class="divide-y divide-gray-200 dark:divide-neutral-700 border-2 w-2/3" hx-target="closest tr"
			hx-swap="outerHTML swap:0.5s">
			<thead>
				<tr>
					<th class="px-6 py-3 text-start text-md font-medium text-gray-500 uppercase w-1/4">
						Task</th>
					<th class="px-6 py-3 text-start text-md font-medium text-gray-500 uppercase w-1/2">
						Description</th>
					<th class="w-4"></th>
					<th class="w-4"></th>
				</tr>
			</thead>
			<tbody class="divide-y divide-gray-200">
				{{range .Tasks}}
				<tr class="hover:bg-gray-100">
					{{if .IsDone}}
					<td class="line-through italic">{{.Task}}</td>
					<td class="line-through italic">{{.Desc}}</td>
					<td></td>
					{{else}}
					<td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-80">{{.Task}}</td>
					<td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-80">{{.Desc}}</td>
					<td>
						<button hx-post="/done/{{.ID}}"
							class=" p-2 text-green-500 hover:text-green-700 hover:underline">Done</button>
					</td>
					{{end}}
					<td>
						<button hx-confirm="Really Delete??" hx-delete="/delete/{{.ID}}"
							class="p-2 text-red-500 hover:text-red-700 hover:underline">Delete</button>
					</td>
				</tr>
				{{end}}
			</tbody>
		</table>
	</div>
</body>

</html>
{{end}}


{{block "add" .}}
<tr class="hover:bg-gray-100">
	{{if .IsDone}}
	<td class="line-through italic">{{.Task}}</td>
	<td class="line-through italic">{{.Desc}}</td>
	<td></td>
	{{else}}
	<td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-80 text-wrap">{{.Task}}</td>
	<td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-80 text-wrap">{{.Desc}}</td>
	<td>
		<button hx-post="/done/{{.ID}}"
			class=" p-2 text-green-500 hover:text-green-700 hover:underline">Done</button>
	</td>
	{{end}}
	<td>
		<button hx-confirm="Really Delete??" hx-delete="/delete/{{.ID}}"
			class="p-2 text-red-500 hover:text-red-700 hover:underline">Delete</button>
	</td>
</tr>
{{end}}