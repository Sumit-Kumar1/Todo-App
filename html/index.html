{{define "index"}}
<!DOCTYPE html>
<html lang="en" xml:lang="en">

<head>
	<title>Todo APP HTMX</title>
	<meta content="text/html; charset=utf-8" />
	<script src="https://unpkg.com/htmx.org@1.9.11/dist/htmx.js"
		integrity="sha384-l9bYT9SL4CAW0Hl7pAOpfRc18mys1b0wK4U8UtGnWOxPVbVMgrOdB+jyz/WY8Jue"
		crossorigin="anonymous"></script>
	<script src="https://cdn.tailwindcss.com"></script>
</head>

<body>
	<div class="flex min-w-full gap-3 divide-y divide-gray-200 min-h-[95vh]">
		<div class="w-1/3 flex flex-col m-5">
			<h1 class="text-2xl text-center font-bold">TODO APP</h1>
			<form hx-post="/add" hx-target="#rend" hx-swap="afterbegin" class="w-full text-center flex gap-3 flex-col">
				<input placeholder="Task Title*" name="task" type="text"
					class="border rounded p-2 w-full text-wrap h-auto"></input>
				<input placeholder="Task Description" name="desc" type="text"
					class="border rounded p-2 w-full text-wrap h-auto"></input>
				<button type="submit" hx-on:after-request="alert('Task Added!!');" hx-on:
					class="border rounded p-2 border-gray-700 bg-blue-500 text-white hover:bg-blue-700 w-auto mx-auto">Add
					Task</button>
			</form>
		</div>
		<div class="w-2/3 h-[95vh] m-5 overflow-scroll">
			<table class="divide-y divide-gray-200 dark:divide-neutral-700 w-full p-3" hx-target="closest tr"
				hx-swap="outerHTML swap:0.5s">
				<thead>
					<tr>
						<th class="px-6 py-3 text-start text-md font-medium text-gray-500 uppercase w-1/4">
							Task</th>
						<th class="px-6 py-3 text-start text-md font-medium text-gray-500 uppercase w-1/2">
							Description</th>
						<th class="w-4"></th>
						<th class="w-4"></th>
					</tr>
				</thead>
				<tbody class="divide-y divide-gray-200" id="rend">
				</tbody>
			</table>
		</div>
	</div>
</body>

</html>
{{end}}


{{block "add" .}}
<tr class="hover:bg-gray-100" id="{{.ID}}">
	{{if .IsDone}}
	<td class="line-through italic text-wrap">{{.Title}}</td>
	<td class="line-through italic text-wrap">{{.Desc}}</td>
	<td></td>
	{{else}}
	<td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-80 text-wrap">{{.Title}}</td>
	<td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-80 text-wrap">{{.Desc}}</td>
	<td>
		<button hx-post="/done/{{.ID}}" hx-target="#{{.ID}}"
			class="p-2 text-green-500 hover:text-green-700 hover:underline">Done</button>
	</td>
	{{end}}
	<td>
		<button hx-confirm="Really Delete??" hx-delete="/delete/{{.ID}}"
			class="p-2 text-red-500 hover:text-red-700 hover:underline">Delete</button>
	</td>
</tr>
{{end}}