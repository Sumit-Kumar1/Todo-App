{{define "index"}}
<!DOCTYPE html>
<html lang="en" xml:lang="en">

<head>
	<title>Todo APP HTMX</title>
	<meta content="text/html; charset=utf-8" />
	<script src="https://unpkg.com/htmx.org@1.9.11/dist/htmx.js"
		integrity="sha384-l9bYT9SL4CAW0Hl7pAOpfRc18mys1b0wK4U8UtGnWOxPVbVMgrOdB+jyz/WY8Jue"
		crossorigin="anonymous"></script>
	<script src="https://cdn.tailwindcss.com"></script>
</head>

<body>
	<div class="flex min-w-full gap-3 divide-y divide-gray-200 min-h-[95vh]">
		<div class="w-1/3 flex flex-col m-5">
			<h1 class="text-2xl text-center font-bold h-20 justify-center">TODO APP</h1>
			<form hx-post="/add" hx-target="#rend" hx-swap="beforeend" class="w-full text-center flex gap-3 flex-col">
				<input placeholder="Task Title*" name="task" type="text"
					class="border rounded p-2 w-full text-wrap h-auto"></input>
				<input placeholder="Task Description" name="desc" type="text"
					class="border rounded p-2 w-full text-wrap h-auto"></input>
				<button type="submit" hx-on:after-request="alert('Task Added!!');"
					class="border rounded p-2 border-gray-700 bg-blue-500 text-white hover:bg-blue-700 w-auto mx-auto">Add
					Task</button>
			</form>
		</div>
		<div class="w-2/3 h-[95vh] relative overflow-x-auto shadow-md sm:rounded-lg m-5">
			<table class="w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400" hx-target="closest tr"
				hx-swap="outerHTML swap:0.5s">
				<thead class="text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400">
					<tr>
						<th scope="col" class="px-6 py-3">
							Task</th>
						<th scope="col" class="px-6 py-3">
							Description</th>
						<th scope="col" class="px-6 py-3"></th>
						<th scope="col" class="px-6 py-3"></th>
					</tr>
				</thead>
				<tbody class="divide-y divide-gray-200" id="rend">
				</tbody>
			</table>
		</div>
	</div>
</body>

</html>
{{end}}


{{block "add" .}}
<tr id="{{.ID}}" class="odd:bg-white odd:dark:bg-gray-900 even:bg-gray-50 even:dark:bg-gray-800 border-b dark:border-gray-700">
	{{if .IsDone}}
	<td class="line-through italic text-wrap px-6 py-4 w-2/4 whitespace-nowrap">{{.Title}}</td>
	<td class="line-through italic text-wrap px-6 py-4 w-2/4 whitespace-nowrap">{{.Desc}}</td>
	<td class="px-6 py-4 w-1/4"></td>
	{{else}}
	<td class="px-6 py-4 w-2/4 font-medium text-gray-900 dark:text-white text-wrap whitespace-nowrap">{{.Title}}</td>
	<td class="px-6 py-4 w-2/4 text-sm font-medium text-gray-80 text-wrap whitespace-nowrap">{{.Desc}}</td>
	<td class="px-6 py-4 w-1/4">
		<button hx-put="/done/{{.ID}}"
			class="font-medium text-blue-600 dark:text-blue-500 hover:underline">Done</button>
	</td>
	{{end}}
	<td class="px-6 py-4 w-1/4">
		<button hx-confirm="Really Delete??" hx-delete="/delete/{{.ID}}"
			class="font-medium text-red-600 dark:text-red-500 hover:underline">Delete</button>
	</td>
</tr>
{{end}}